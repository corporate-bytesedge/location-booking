!function(a){a.fn.videoBG=function(b,c){var c={};if("object"==typeof b)c=a.extend({},a.fn.videoBG.defaults,b);else{if(b)return a(b).videoBG(c);c=a.fn.videoBG.defaults}var d=a(this);if(d.length){"static"!=d.css("position")&&d.css("position")||d.css("position","relative"),0==c.width&&(c.width=d.width()),0==c.height&&(c.height=d.height());var e=a.fn.videoBG.wrapper();e.height(c.height).width(c.width),c.textReplacement?(c.scale=!0,d.width(c.width).height(c.height).css("text-indent","-9999px")):e.css("z-index",c.zIndex+1),e.html(d.clone(!0));var f=a.fn.videoBG.video(c);return c.scale&&(e.height(c.height).width(c.width),f.height(c.height).width(c.width)),d.html(e),d.append(f),f.find("video")[0]}},a.fn.videoBG.setFullscreen=function(b){var c=a(window).width(),d=a(window).height();if(b.css("min-height",0).css("min-width",0),b.parent().width(c).height(d),c/d>b.aspectRatio){b.width(c).height("auto");var e=b.height(),f=(e-d)/2;0>f&&(f=0),b.css("top",-f)}else{b.width("auto").height(d);var g=b.width(),f=(g-c)/2;if(0>f&&(f=0),b.css("left",-f),0===f){setTimeout(function(){a.fn.videoBG.setFullscreen(b)},500)}}a("body > .videoBG_wrapper").width(c).height(d)},a.fn.videoBG.video=function(b){a("html, body").scrollTop(-1);var c=a("<div/>");c.addClass("videoBG").css("position",b.position).css("z-index",b.zIndex).css("top",0).css("left",0).css("height",b.height).css("width",b.width).css("opacity",b.opacity).css("overflow","hidden");var d=a("<video/>");if(d.css("position","absolute").css("z-index",b.zIndex).attr("poster",b.poster).css("top",0).css("left",0).css("min-width","100%").css("min-height","100%"),b.autoplay&&d.attr("autoplay",b.autoplay),b.fullscreen){d.bind("canplay",function(){d.aspectRatio=d.width()/d.height(),a.fn.videoBG.setFullscreen(d)});var e;a(window).resize(function(){clearTimeout(e),e=setTimeout(function(){a.fn.videoBG.setFullscreen(d)},100)}),a.fn.videoBG.setFullscreen(d)}var f=d[0];b.loop&&(loops_left=b.loop,d.bind("ended",function(){loops_left&&f.play(),loops_left!==!0&&loops_left--})),d.bind("canplay",function(){b.autoplay&&f.play()}),a.fn.videoBG.supportsVideo()&&(a.fn.videoBG.supportType("webm")?d.attr("src",b.webm):a.fn.videoBG.supportType("mp4")?d.attr("src",b.mp4):d.attr("src",b.ogv));var g=a("<img/>");return g.attr("src",b.poster).css("position","absolute").css("z-index",b.zIndex).css("top",0).css("left",0).css("min-width","100%").css("min-height","100%"),c.html(a.fn.videoBG.supportsVideo()?d:g),b.textReplacement&&(c.css("min-height",1).css("min-width",1),d.css("min-height",1).css("min-width",1),g.css("min-height",1).css("min-width",1),c.height(b.height).width(b.width),d.height(b.height).width(b.width),g.height(b.height).width(b.width)),a.fn.videoBG.supportsVideo()&&f.play(),c},a.fn.videoBG.supportsVideo=function(){return document.createElement("video").canPlayType},a.fn.videoBG.supportType=function(b){if(!a.fn.videoBG.supportsVideo())return!1;var c=document.createElement("video");switch(b){case"webm":return c.canPlayType('video/webm; codecs="vp8, vorbis"');case"mp4":return c.canPlayType('video/mp4; codecs="avc1.42E01E, mp4a.40.2"');case"ogv":return c.canPlayType('video/ogg; codecs="theora, vorbis"')}return!1},a.fn.videoBG.wrapper=function(){var b=a("<div/>");return b.addClass("videoBG_wrapper").css("position","absolute").css("top",0).css("left",0),b},a.fn.videoBG.defaults={mp4:"",ogv:"",webm:"",poster:"",autoplay:!0,loop:!0,scale:!1,position:"absolute",opacity:.7,textReplacement:!1,zIndex:0,width:0,height:0,fullscreen:!1,imgFallback:!0}}(jQuery);